{% assign products_to_show = section.settings.popularQuestionRange %}

<div class="popular-question-block" id="popularQuestionBlock" data-faqs-to-show="{{ products_to_show }}">
  <div class="popular-content-wrapper page-width">
    <div class="heading center">
      <h2>{{ section.settings.popularQuestionTitle }}</h2>
    </div>
    <div class="popular-card-wrapper" id="popularCards"></div>
  </div>
</div>

<script>


document.addEventListener('DOMContentLoaded', () => {
  fetchFAQsByFilters({popular:true,appendTo:"popularCards"});
});

document.addEventListener('shopify:section:load', (event) => { 
  const sectionId = event?.detail?.sectionId;
  if (sectionId.includes('evenflo_faq_popular_question')) {
    fetchFAQsByFilters({popular:true,appendTo:"popularCards"});
  } 
});


</script>

{% schema %}
{
  "name": "EvenFlo FAQ Popular",
  "tag": "section",
  "class": "popularQuestion",
  "disabled_on": {
    "groups": ["header", "footer"]
  },
  "settings": [
    {
      "type": "text",
      "id": "popularQuestionTitle",
      "label": "Popular Question Title",
      "default":"Popular Questions"
    },
    {
        "type": "range",
        "id": "popularQuestionRange",
        "label": "Number of questions to show",
        "default":3,
        "min": 1,
        "max": 3,
        "step": 1
      }
  ],
  "presets": [
    {
      "name": "EvenFlo FAQ Popular",
      "blocks": [

      ]
    }
  ]

}
{% endschema %}
